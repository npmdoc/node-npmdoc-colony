<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/hughsk/colony"

    >colony (v0.0.7)</a>
</h1>
<h4>In-browser network graphs representing the links between your Node.js code and its dependencies.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.colony">module colony</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.colony.build">
            function <span class="apidocSignatureSpan">colony.</span>build
            <span class="apidocSignatureSpan">(filenames, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.colony.force">
            function <span class="apidocSignatureSpan">colony.</span>force
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.colony.generate">
            function <span class="apidocSignatureSpan">colony.</span>generate
            <span class="apidocSignatureSpan">(filenames, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.colony.npm">
            function <span class="apidocSignatureSpan">colony.</span>npm
            <span class="apidocSignatureSpan">(modules, options, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">colony.</span>utils</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.colony.utils">module colony.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.colony.utils.findParent">
            function <span class="apidocSignatureSpan">colony.utils.</span>findParent
            <span class="apidocSignatureSpan">(file, parents)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.colony.utils.getModuleVersion">
            function <span class="apidocSignatureSpan">colony.utils.</span>getModuleVersion
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.colony.utils.guessReadme">
            function <span class="apidocSignatureSpan">colony.utils.</span>guessReadme
            <span class="apidocSignatureSpan">(filenames)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.colony.utils.safemkdir">
            function <span class="apidocSignatureSpan">colony.utils.</span>safemkdir
            <span class="apidocSignatureSpan">(directory)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.colony.utils.safemkdirp">
            function <span class="apidocSignatureSpan">colony.utils.</span>safemkdirp
            <span class="apidocSignatureSpan">(dir)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.colony" id="apidoc.module.colony">module colony</a></h1>


    <h2>
        <a href="#apidoc.element.colony.build" id="apidoc.element.colony.build">
        function <span class="apidocSignatureSpan">colony.</span>build
        <span class="apidocSignatureSpan">(filenames, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">build = function (filenames, options, callback) {
    var options = options || {}
      , sourcedirs

    var templates = {
          index: ejs.compile(fs.readFileSync(__dirname + &#x27;/../views/index.ejs&#x27;, &#x27;utf8&#x27;))
        , readme: ejs.compile(fs.readFileSync(__dirname + &#x27;/../views/readme.ejs&#x27;, &#x27;utf8&#x27;))
    };

    filenames = Array.isArray(filenames) ? filenames : [filenames]

    options.directory = options.directory || path.resolve(process.cwd(), &#x27;colony&#x27;)
    options.filedir   = options.filedir || path.resolve(options.directory, &#x27;files&#x27;)

    colony.generate(filenames, {
          traverseModules: options.traverseModules
        , readme: options.readme
        , title: options.title
        , scale: options.scale
        , absolute: true
    }, function(err, res) {
        if (err) return callback(err)

        var index = path.resolve(options.directory, &#x27;index.html&#x27;)

        utils.safemkdir(options.directory)
        utils.safemkdir(options.filedir)

        filenames.forEach(function(name, i) {
            utils.safemkdir(path.resolve(options.filedir, i+&#x27;&#x27;))
        })

        wrench.copyDirSyncRecursive(__dirname + &#x27;/../public&#x27;, options.directory)

        var scripts = res.data.nodes.filter(function(file) {
            return file &#x26;&#x26; file.filename
        }).map(function(file) {
            var source = file.filename

            file.filename = utils.findParent(file.filename, filenames)

            return {
                  source: source
                , dest: path.resolve(options.filedir, file.filename) + &#x27;.html&#x27;
                , id: file.id
            };
        });

        var html = templates.index({
              files: res.data
            , readme: res.readme
            , title: options.title
            , fork: options.fork || &#x27;&#x27;
        })

        fs.writeFileSync(index, html, &#x27;utf8&#x27;)

        buildScriptPages(scripts, templates.readme, callback)
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.colony.force" id="apidoc.element.colony.force">
        function <span class="apidocSignatureSpan">colony.</span>force
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">force = function (data) {
    var index
      , links
      , nodes

    data = data.filter(function(file) {
        return file.filename
    })

    index = data.reduce(function(index, file, n) {
        file.index = n
        index[file.filename] = file
        return index
    }, {})

    links = data.reduce(function(links, file) {

        file.parents.forEach(function(child) {
            if (!index[child]) return
            if (typeof index[child].index === &#x27;undefined&#x27;) return

            links.push({
                source: index[child].index,
                target: file.index
            })
        })

        return links
    }, [])

    nodes = data.map(function(file) {
        delete file.parents
        return file
    })

    return {
          nodes: data
        , links: links
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

return {
      name: name
    , color: color.toString()
};
})

var force = d3.layout.<span class="apidocCodeKeywordSpan">force</span>()
.size([width, height])
.charge(-50 * colony.scale)
.linkDistance(20 * colony.scale)
.on(&#x27;tick&#x27;, function() {
    link.attr(&#x27;x1&#x27;, function(d) { return d.source.x; })
        .attr(&#x27;y1&#x27;, function(d) { return d.source.y; })
        .attr(&#x27;x2&#x27;, function(d) { return d.target.x; })
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.colony.generate" id="apidoc.element.colony.generate">
        function <span class="apidocSignatureSpan">colony.</span>generate
        <span class="apidocSignatureSpan">(filenames, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">generate = function (filenames, options, callback) {
    var options = options || {}
      , callback = callback || function(){}

    filenames = Array.isArray(filenames) ? filenames : [filenames]

    options.readme = options.readme ?
        path.resolve(options.readme) :
        utils.guessReadme(filenames)

    return reqursive(filenames, options, function (err, files) {
        if (err) return callback(err)

        files.slice(0, filenames.length).forEach(function(file) {
            file.root = true
        })

        files = files.filter(function(file) {
            return !file.native
        })

        data = colony.force(files)
        data.scale = parseFloat(options.scale) || 1

        fs.readFile(options.readme || &#x27;&#x27;, &#x27;utf8&#x27;, function(err, readme) {
            var readme = err ? false : marked(readme)

            callback(null, {
                  data: data
                , readme: readme
            })
        })
    })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.colony.npm" id="apidoc.element.colony.npm">
        function <span class="apidocSignatureSpan">colony.</span>npm
        <span class="apidocSignatureSpan">(modules, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">npm = function (modules, options, callback) {
    var moduleFolder = path.resolve(&#x27;colony.tmp&#x27;)
      , cwd = process.cwd()
      , npmName = process.platform === &#x27;win32&#x27; ? &#x27;npm.cmd&#x27; : &#x27;npm&#x27;

    utils.safemkdir(moduleFolder)

    fs.writeFileSync(path.join(moduleFolder, &#x27;package.json&#x27;), JSON.stringify({
          name: &#x27;colony-render&#x27;
        , description: &#x27;Placeholder for quick install of modules&#x27;
        , private: true
    }, null, 2) + &#x27;\n&#x27;, &#x27;utf8&#x27;)

    var npm = spawn(npmName, [&#x27;install&#x27;].concat(modules), {
          cwd: moduleFolder
        , env: process.env
    })

    npm.stdout.pipe(process.stdout, { end: false })
    npm.stderr.pipe(process.stderr, { end: false })

    npm.once(&#x27;exit&#x27;, function(code) {
        if (code !== 0) return callback(new Error(&#x27;NPM exited with code &#x27; + code))

        modules = fs.readdirSync(path.join(moduleFolder, &#x27;node_modules&#x27;))
        modules = modules.filter(function(folder) {
            return folder.indexOf(&#x27;.&#x27;)
        }).map(function(folder) {
            return require.resolve(
                path.resolve(moduleFolder, &#x27;node_modules/&#x27; + folder)
            )
        })

        modules = modules.concat(options.others || [])

        callback(null, modules)
    })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.colony.utils" id="apidoc.module.colony.utils">module colony.utils</a></h1>


    <h2>
        <a href="#apidoc.element.colony.utils.findParent" id="apidoc.element.colony.utils.findParent">
        function <span class="apidocSignatureSpan">colony.utils.</span>findParent
        <span class="apidocSignatureSpan">(file, parents)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findParent = function (file, parents) {
    var choice

    choice = parents.map(function(parent, n) {
        parent = path.dirname(parent)
        return {
            dir: path.relative(parent, file)
            , n: n
        }
    }).sort(function(a, b) {
        a = a.dir.match(/\.\./g)
        b = b.dir.match(/\.\./g)

        a = a ? a.length : 0
        b = b ? b.length : 0

        return a - b
    })[0]

    return path.join(choice.n+&#x27;&#x27;, choice.dir)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.colony.utils.getModuleVersion" id="apidoc.element.colony.utils.getModuleVersion">
        function <span class="apidocSignatureSpan">colony.utils.</span>getModuleVersion
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getModuleVersion = function (filename) {
    var dirname = path.dirname(filename)
      , pkg = path.resolve(dirname, &#x27;package.json&#x27;)
      , json

    try {
        json = fs.readFileSync(pkg, &#x27;utf8&#x27;)
        json = JSON.parse(json).version
    } catch(e) {
        return false
    }

    return json
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.colony.utils.guessReadme" id="apidoc.element.colony.utils.guessReadme">
        function <span class="apidocSignatureSpan">colony.utils.</span>guessReadme
        <span class="apidocSignatureSpan">(filenames)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">guessReadme = function (filenames) {
    var directories = filenames.map(function(filename) {
        return path.resolve(path.dirname(filename))
    })

    var readmes = directories.map(function(dir) {
        return fs.readdirSync(dir).filter(function(file) {
            return file.match(/^readme\.(md|markdown|)$/i)
        })[0]
    }).filter(function(f) {
        return f
    })

    if (!readmes.length) return false

    return path.resolve(path.dirname(filenames[0]), readmes[0])
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.colony.utils.safemkdir" id="apidoc.element.colony.utils.safemkdir">
        function <span class="apidocSignatureSpan">colony.utils.</span>safemkdir
        <span class="apidocSignatureSpan">(directory)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">safemkdir = function (directory) {
    try {
        fs.mkdirSync(directory)
    } catch(e) { return false }
    return true
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.colony.utils.safemkdirp" id="apidoc.element.colony.utils.safemkdirp">
        function <span class="apidocSignatureSpan">colony.utils.</span>safemkdirp
        <span class="apidocSignatureSpan">(dir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">safemkdirp = function (dir) {
    try {
        wrench.mkdirSyncRecursive(dir)
    } catch(e) { return false }
    return true
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
